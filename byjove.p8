pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
#include constants.lua
#include lib.lua
#include ui.lua

function _init()
  printh("Starting game")
  gs.starport_scene = starport_scene('station_ganymede')
  gs.start_scene = start_scene()
  gs.cs = skip_tutorial and 'starport_scene' or 'start_scene'
end

function _update()
  if get_xy then printh(gs['player'].x..","..gs['player'].y) end
  check_end_conditions()
  gs[gs.cs]:_update()
end

function _draw()
  cls()
  gs[gs.cs]:_draw()
end
__gfx__
7d0000d7000000000004400000015000000000000655556000000000000770000030030000777770000880000007700000000000000000000000000000000000
d000000d00000000004ff400000150000000000006000060000000000061160000333300077b7b77000888000078770000000700000000000000000000000000
0070070000000000004ff40000005000000000000655556000000000000ff000003ff3000777b777000ff000006ff6000000c770000000000000000000000000
0007700000000000008888000000500000000000060000600000000000cccc0000444400077b7b7700dddd0000333300000c77bb000000000000000000000000
0007700000000000008998000005550000000000065555600000000000c77c00004334000077777000dccd000031111100cc777b000000000000000000000000
0070070000000000008998000555555500000000060000600000055000c77c00004334000007770000dccd00000f10f000c77b76000000000000000000000000
d000000d00000000000550000000f0000000000006555560111111110001100000522500000070000004400000044000077777b6000000000000000000000000
7d0000d7000000000005500000000000ffffffff06000060055000000001100005522550000000000004400000044000007666b0000000000000000000000000
55555555555555555555555555555555000000011000000000555500001000000000000000000100000000155005500551000000000000000000000000000000
505050500505505050050505505050500000000110000000005ee500001000000000000000000100000001500550055005100000000000000000000000000000
55050505005005000500505505050000000005000050000005eeee50001000000000000000000100000010055005500550010000000000000000000000000000
50050000000050000005000500000005000050000005000001eeee10001000000000000000000100000155500550055005551000000000000000000000000000
55000000000000000000005500000000000000000000000001eeee10001500055005500550005100001500055005500550005100000000000000000000000000
50500000050000000000000500505050005000000000050001eeee10010055500550055005550010010055500550055005550010000000000000000000000000
5505000000000000000005050505050505000000000000500ceeeec0155500055005500550005551155500055005500550005551000000000000000000000000
50500000000000000000005555555555500000000000000505eeee50000055500550055005550000000055500550055005550000000000000000000000000000
55000000500000050000050555005005550000011000005501eeee10000000000000000000000000000000000000000000000000000000000000000000000000
50500050000000000000005550500055001000011000010001eeee10111111110000000000000000000000000000000000000000000000000000000000000000
55000000000000000000050555000505001005000050010001eeee10010001000000000000000000000000000000000000000000000000000000000000000000
50000000000005000050005550500055001050000005010001eeee10010001100100000100000000000000000000000000000000000000000000000000000000
55005000000000000000050555000505001000000000010001eeee10011001010104440100000000000000000000000000000000000000000000000000000000
50500000000000000000005550500055001000000000010001eeee10010100100510401500000000000000000000000000000000000000000000000000000000
55000000000000000000050555000505050000000000005001eeee10001000000550405500000000000000000000000000000000000000000000000000000000
50500000500000050000005550000055500000000000000501eeee10000000000000000000000000000000000000000000000000000000000000000000000000
50500000000000000000050550000005005555000000000001eeee10eeeeeeee10c000000000000000000c010000000000000000000000000000000000000000
55005000500000000000005500000000005ee5000000000001eeee10eeeeeeeee1000000000000000000001e0000000000000000000000000000000000000000
5050000000000500000005050000000005eeee500000000001eeee10eeeeeeeeee11110000000000001111ee0000000000000000000000000000000000000000
5500000000000000000000050000000051eeee155000000555eeee55eeeeeeeeeee100c0000000000c001eee0000000000000000000000000000000000000000
505000000000000000050055000005000ceeeec0055555500ceeeec0eeeeeeeeeeee1000000000000001eeee0000000000000000000000000000000000000000
5505005005050505505005050000000051eeee155010010555555555eeeeeeeeeeeee10000000000001eeeee0000000000000000000000000000000000000000
50500505505050500505500500000000011111100010010001111110eeeeeeeeeeeeee100000000001eeeeee0000000000000000000000000000000000000000
55555555555555555555555550000005000000000010010000055000eeeeeeeeeeeeeee1000000001eeeeeee0000000000000000000000000000000000000000
0000000000000000010060000090090000cccc000000000000000000000000000000000000000000000000000000000000000000000000000999899900000000
07770000000000001100060603b33b000ccccac00000000000000000000000000000000000000000000000000000000000000000000000000999988900000000
77077000777777880000656003b33b30cccca9cc0000000000000000000000000000000000000000000000000000000000000000000000000049998900000000
77777000ccc777880056060003bbbb30ccca9ccc0000000000000000000000000000000000000000000000000000000000000000000000000049999900000000
778770c8767677770555506003b33b30ccaaaacc0000000000000000000000000000000000000000000000000000000000000000000000000004999900000000
788870007676667755050000038b3b30ccc9accc0000000000000000000000000000000000000000000000000000000000000000000000000000949900000000
778770807777777705555011003b3bb90ccaccc00000000000000000000000000000000000000000000000000000000000000000000000000000004900000000
777770c000000000005000100009000000accc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44444444444444440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
79595959595959590000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000009900000000
75555555555555560000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000999900000000
755ffffffffff5560000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000009889900000000
755f44444444f5560000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000098988900000000
755f44444444f5560000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000098898900000000
711f44444444f1160000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000899989900000000
715f44444444f5160000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000889998900000000
715f44444444f51600000000000000000000000000000000000000000000000000000555ddd0000000000555ddd0000000000000000000000000000000000000
715f44444444f516000000000000000000000000000000000000000000000000000555d555577000000555d6d67770000000066777700000000000999a000000
715f44444444f51600000000000000000000000000000000000000000000000000555655d55557000055d615df667700000666777777700000009999499a0000
715f44444444f516000000000000000000000000000000000000000000000000055d676566565570055d5156667f6d700022668747777700000988999999a000
715ffffffffff516000000000000000000000000000000000000000000000000055d565555676570055ddd6ddff67d7000624484788477000098988949999a00
71555555555555160000000000000000000000000000000000000000000000005d555d5d755655565d111ddd76f66f6606244448744844400098898999499a00
715555999955551600000000000000000000000000000000000000000000000056555d5565555555511d1d1166f6fff602644444448447400899989999449aa0
715555555555551600000000000000000000000000000000000000000000000067655555555f55555156d6116f6f6677024448748444447008899989999499a0
700000000000000000000000000000000000000000000000000000000000000056556555f55f56f55d565616f66ff6f7044444444444447009998999499999a0
777000000000000000000000000000000000000000000000000000000000000055567655555555555dd516516dd666f7044847778484447009999889444999a0
07777660000000000000000000000000000000000000000000000000000000005555655565555557511661666d6f66d706644484844447700049998994449a00
067777760000000000000000000000000000000000000000000000000000000005d5d5555565557005ddd1666fd66dd000266488884774000049999999999a00
0067777600000000000000000000000000000000000000000000000000000000055d5d55567656700551dd65666676700022624477477400000499999899a000
00677776000000000000000000000000000000000000000000000000000000000055d556556566000055d51666f66600000622644477700000009499999a0000
006777760000000000000000000000000000000000000000000000000000000000055d555556600000055dd6666660000000066677400000000000499a000000
00066666000000000000000000000000000000000000000000000000000000000000055565700000000005556770000000000000000000000000000000000000
__gff__
0000000100000100000000000000000001010101000000000000000000000000010101010000000101000000000000000101010101000100000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
3331313131313331313131313114010101000101010101010101010101010101212121212121212121212121010101013737373737373737203331313131312101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2233010301332327272727272701010101140101010101010101010101010101333131313131010101010101010101013737373737373737303201010129292033313131313131330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2233060606332301010101010101010101203331313131333331313131332121222727272727200101010101010101203737373737373737010101010129292022000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2214040404152301010116010101010101202200030000202200000300202121222727272727300101013131313131203737373737373737063406340634062022051011111111330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3311111111052201160126011601010101202227272727202227272727202121221404040425012033222727032727203737373737373737333535353535292022052027272727140000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3333330101052201261626162601010101202217181819202217181819202121011111111112053031323928282839203737373737373737101111111112052000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3331313131053201262626262601010101203311120510333312051011202121010101010122050101011a1b1b1b1c203737373737373737202929292922052000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2234343434053406363636363606060606303333220520343422052033202121000101010101111205101111111111213737373737373737202929292922052000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2235353535053535353535353535353535142501010514010115050101202121013131313121212205202131313131211111111111111313313131313122052000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3305111111111113131313131313131313131313131111111111111111332121222703032720213205302216161616202131313131220116011601162923052000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2105213333332227032727272727272727272727272000000000000000000000222727272730320305032336363636202227032727231626162616261623052000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2105333331313216011601160116011600160016002000000000000000000000221718181819040405040417181819202206060606233636363636363603052000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2105333227272736343634363436343634363436342000000000000000000000001111111111111205101313131313212204040404292929292929040404052000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
330501010101010404043333213a373737373737372000000000000000000000010100313131002205200016001600202111111111120510111111111111112100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3313131313131313131112213a37373737373737372000000000000000000000010122343434303205233436343634200031313131220520010101160101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
32272737273727372720323a3737373737373737372000000000000000000000010122000000000005003535353535202227272727230523010116261601012100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2131313101010101220101153131311401010101010101010101010101010120010100111105201313131313131313212201012929230523010136363601012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2201010120010131323933032727270301010101010101010101010101010120010101012205230000000000000000202111111105230523013928282839012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2201010120012201010404043535353910131313111313131201010101010120010101012205230606060606060606200101292205230523391a1b1b1b1c392000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
22051313313132052327272712051001232727272327272723010101010101200101010122050001000000000000002001012922052905291a1b1b1b1b1b1c2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2205010101010105230101012205200123171819231718192301010101010120010101012113131313131313111105200101290111110510111111111111112100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0111111111111111220606062205200620120510211205102206060606060620010101013000322727272727303205200101010101220520010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101220101010105010101010501010105010101010101010120010101010123010101343434343405200101010101220520010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2131313131313131220510111111111111111111111111111111111111111121161616160101010133000000000005200101010101220520010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2227031603160327230520313131313131313131313131310101010101010101343634363401010110111111111111010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
220134363436340123052301010101010101013a373737373001010101010101373737373738010130010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2239282828282801230523343434343401013a37373737373730010101010101373737373737380101300101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
221a1b1b1b1b1b1c0105010101010133013a3737373737373737300101010101373737373737373801013001010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
211111111111111111111111111111123a373737373737373737373001010101373737373737373738010120010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101303237373737373737373737373730010101373737373737373737010120010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
01010101010101010101010101013a3737373737373737373737373737300101373737373737373737010120010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
010101010101010101010101013a373737373737373737373737373737373001373737373737373737010120010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0108000017750177501775017750177501775017750177501f7501f7501f7501f7501f7501f7501f7501f7501c7501c7501c7501c7501c7501c7501c7501c7501e7501e7501e7501e7501e7501e7501a7501a750
0108000017750177500000000000177501775000000000001a7501a75000000000001e7501e75000000000001f7501f7501f7501f7501f7501f7501f7501f7501f7501f7501f7501f75000000000001f7501f750
010800001e7501e750000000000023750237500000000000217502175000000000001c7501c75000000000001a7501a7501a7501a750177501775000000000001775017750177501775017750177501e7501e750
01100000237502375021750217501f7501f7501e7501e7501c7501c7501c7501c7501c7501c7501c7501c75021750217501f7501f7501e7501e7501c7501c7501a7501a7501a7501a7501a7501a7501f7501f750
011000001f7501f7501e7501e7501c7501c7501a7501a75019750197501975019750197501975019750197501e7501e7501e7501e7501c7501c7501c7501c7501a7501a7501a7501a75019750197501975019750
010800000e7500e75000700007000e7500e75000700007000e7500e75000700007000d7500d75000700007000e750007000e750007000e7500e75012750127500e7500e750007000070000700007000070000700
010800000e7500e75000000000000e7500e75000000000000e750000000e750000000e750000000e750000000e7500e75000000000001275012750000000000010750107500e7500e75012750127500e7500e750
001000000e7500e750000000e7500e750000000e7500e750000000000010750107500e7500e7500d7500d7500d7500d750000000d7500d750000000d7500d7500000000000127501275010750107500e7500e750
011000000b7700b7600b7600b7600b7500b7500b7500b7500b7500b7400b7400b7400b7300b7300b730087200872007720067200471004710047100371002710017100b7000b7000b7000b7000b7000b7000b700
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000200000e4500e4500e4500d4500e4500e4500d4500d4501f300203001f300163001e300153001d30015300153001c300153001c30000000153001c300153001e000143001e0001230000000143001530016300
0004000016150181501b1501f150171001c1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00040000211501d150171501415013150000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000400001e05022050240500e550105501c0501b050125501d05020050115500f5501f0501a05010550130502275022750227502275011550125501d0501c0501155014550165501805016050150501355000000
000400200061000600006000160003600016000360000610006000060001600016000060000600006100060000600046000160001600016000161004600016000460000600006000060001610046000160003600
000400000f0500f0500f0500f05008750087500875008750000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000400000805008050080500805010750107501075010750000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000061000610054300061000610034300061007430006100061000610054300061000610006100061000610006100061000610006100061000610006100061000610006100061000610006100061000610
__music__
00 01424344
00 01424344
01 02064344
00 03424344
00 02064344
00 03074344
00 04084344
02 05074344
04 09424344

