pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
#include constants.lua
#include lib.lua
#include ui.lua

function _init()
  printh("Starting game")
  if skip_tutorial then
    gs.starport_scene = starport_scene('station_ganymede')
    gs.cs = 'starport_scene'
  else
    gs.start_scene = start_scene()
    gs.cs = 'start_scene'
  end
end

function _update()
  if get_xy then printh(gs['player'].x..","..gs['player'].y) end
  check_end_conditions()
  gs[gs.cs]:update()
end

function _draw()
  cls()
  gs[gs.cs]:draw()
end
__gfx__
7d0000d7000000000004400000015000000000000655556000000000000770000030030000777770000880000007700000000000000000000000000000000000
d000000d00000000004ff400000150000000000006000060000000000061160000333300077b7b77000888000078770000000700000000000000000000000000
0070070000000000004ff40000005000000000000655556000000000000ff000003ff3000777b777000ff000006ff6000000c770000000000000000000000000
0007700000000000008888000000500000000000060000600000000000cccc0000444400077b7b7700dddd0000333300000c77bb000000000000000000000000
0007700000000000008998000005550000000000065555600000000000c77c00004334000077777000dccd000031111100cc777b000000000000000000000000
0070070000000000008998000555555500000000060000600000000000c77c00004334000007770000dccd00000f10f000c77b76000000000000000000000000
d000000d00000000000550000000f0000000000006555560000000000001100000522500000070000004400000044000077777b6000000000000000000000000
7d0000d7000000000005500000000000ffffffff06000060111111110001100005522550000000000004400000044000007666b0000000000000000000000000
55555555555555555555555555555555000000011000000000555500000000000000000000000000000000000000000000000000000000000000000000000000
505050500505505050050505505050500000000110000000005ee500000000000000000000000000000000000000000000000000000000000000000000000000
55050505005005000500505505050000000005000050000005eeee50000000000000000000000000000000000000000000000000000000000000000000000000
50050000000050000005000500000005000050000005000001eeee10000000000000000000000000000000000000000000000000000000000000000000000000
55000000000000000000005500000000000000000000000001eeee10000000000000000000000000000000000000000000000000000000000000000000000000
50500000050000000000000500505050005000000000050001eeee10000000000000000000000000000000000000000000000000000000000000000000000000
5505000000000000000005050505050505000000000000500ceeeec0000000000000000000000000000000000000000000000000000000000000000000000000
50500000000000000000005555555555500000000000000505eeee50000000000000000000000000000000000000000000000000000000000000000000000000
55000000500000050000050555005005550000011000005501eeee10000000000000000000000000000000000000000000000000000000000000000000000000
50500050000000000000005550500055001000011000010001eeee10111111110000000000000000000000000000000000000000000000000000000000000000
55000000000000000000050555000505001005000050010001eeee10010001000000000000000000000000000000000000000000000000000000000000000000
50000000000005000050005550500055001050000005010001eeee10010001100000000000000000000000000000000000000000000000000000000000000000
55005000000000000000050555000505001000000000010001eeee10011001010000000000000000000000000000000000000000000000000000000000000000
50500000000000000000005550500055001000000000010001eeee10010100100000000000000000000000000000000000000000000000000000000000000000
55000000000000000000050555000505050000000000005001eeee10001000000000000000000000000000000000000000000000000000000000000000000000
50500000500000050000005550000055500000000000000501eeee10000000000000000000000000000000000000000000000000000000000000000000000000
50500000000000000000050550000005005555000000000001eeee10eeeeeeee0000000000000000000000000000000000000000000000000000000000000000
55005000500000000000005500000000005ee5000000000001eeee10eeeeeeee0000000e00000000000000000000000000000000000000000000000000000000
5050000000000500000005050000000005eeee500000000001eeee10eeeeeeee000000ee00000000000000000000000000000000000000000000000000000000
5500000000000000000000050000000051eeee155000000555eeee55eeeeeeee00000eee00000000000000000000000000000000000000000000000000000000
505000000000000000050055000005000ceeeec0055555500ceeeec0eeeeeeee0000eeee00000000000000000000000000000000000000000000000000000000
5505005005050505505005050000000051eeee155010010555555555eeeeeeee000eeeee00000000000000000000000000000000000000000000000000000000
50500505505050500505500500000000011111100010010001111110eeeeeeee00eeeeee00000000000000000000000000000000000000000000000000000000
55555555555555555555555550000005000000000010010000055000eeeeeeee0eeeeeee00000000000000000000000000000000000000000000000000000000
0000000000000000010060000090090000cccc000000000000000000000000000000000000000000000000000000000000000000000000000999899900000000
07770000000000001100060603b33b000ccccac00000000000000000000000000000000000000000000000000000000000000000000000000999988900000000
77077000777777880000656003b33b30cccca9cc0000000000000000000000000000000000000000000000000000000000000000000000000049998900000000
77777000ccc777880056060003bbbb30ccca9ccc0000000000000000000000000000000000000000000000000000000000000000000000000049999900000000
778770c8767677770555506003b33b30ccaaaacc0000000000000000000000000000000000000000000000000000000000000000000000000004999900000000
788870007676667755050000038b3b30ccc9accc0000000000000000000000000000000000000000000000000000000000000000000000000000949900000000
778770807777777705555011003b3bb90ccaccc00000000000000000000000000000000000000000000000000000000000000000000000000000004900000000
777770c000000000005000100009000000accc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44444444444444440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
79595959595959590000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000009900000000
75555555555555560000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000999900000000
755ffffffffff5560000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000009889900000000
755f44444444f5560000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000098988900000000
755f44444444f5560000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000098898900000000
711f44444444f1160000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000899989900000000
715f44444444f5160000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000889998900000000
715f44444444f51600000000000000000000000000000000000000000000000000000555ddd0000000000555ddd0000000000000000000000000000000000000
715f44444444f516000000000000000000000000000000000000000000000000000555d555577000000555d6d67770000000066777700000000000999a000000
715f44444444f51600000000000000000000000000000000000000000000000000555655d55557000055d615df667700000666777777700000009999499a0000
715f44444444f516000000000000000000000000000000000000000000000000055d676566565570055d5156667f6d700022668747777700000988999999a000
715ffffffffff516000000000000000000000000000000000000000000000000055d565555676570055ddd6ddff67d7000624484788477000098988949999a00
71555555555555160000000000000000000000000000000000000000000000005d555d5d755655565d111ddd76f66f6606244448744844400098898999499a00
715555999955551600000000000000000000000000000000000000000000000056555d5565555555511d1d1166f6fff602644444448447400899989999449aa0
715555555555551600000000000000000000000000000000000000000000000067655555555f55555156d6116f6f6677024448748444447008899989999499a0
700000000000000000000000000000000000000000000000000000000000000056556555f55f56f55d565616f66ff6f7044444444444447009998999499999a0
777000000000000000000000000000000000000000000000000000000000000055567655555555555dd516516dd666f7044847778484447009999889444999a0
07777660000000000000000000000000000000000000000000000000000000005555655565555557511661666d6f66d706644484844447700049998994449a00
067777760000000000000000000000000000000000000000000000000000000005d5d5555565557005ddd1666fd66dd000266488884774000049999999999a00
0067777600000000000000000000000000000000000000000000000000000000055d5d55567656700551dd65666676700022624477477400000499999899a000
00677776000000000000000000000000000000000000000000000000000000000055d556556566000055d51666f66600000622644477700000009499999a0000
006777760000000000000000000000000000000000000000000000000000000000055d555556600000055dd6666660000000066677400000000000499a000000
00066666000000000000000000000000000000000000000000000000000000000000055565700000000005556770000000000000000000000000000000000000
33131313131313330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
22000000000000021000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
22500111111111330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
22500272727272410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000100000000000000000001010101000000000000000000000000010101010000000100000000000000000101010101000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
3331313131313331313131313114010101000101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2233010301332327272727272701010101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2233060606332301010101010101010101013331313131333331313131332121000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2214040404152301010116010101010101012200030000202200000300202121000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3311111111052201160126011601010101012227272727202227272727202121000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3333330101052201261626162601010101012214040415202214040415202121000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3331313131053201262626262601010101013311120510333312051011202121000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2234343434053401363636363601010133333333220520343422052033202121000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2235353535053535353535353535353535353535350501010101050101202121010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3305111111111113131313131313131313131313131111111111111111332121000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2105213333332227032727272727272727272727272000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2105333331313216011601160116011600000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2105333227272736343634363436343600000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3305010101010104040433373737373737373737372000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3313131313131313131112373737373737373737372000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3237373737373737372032373737373737373737372000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
